{% extends 'core/base.html' %}
{% block page_title %}Vendas{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Histórico de Vendas</h1>
    <a href="{% url 'venda_nova' %}" class="btn btn-success">+ Registrar Venda</a>
</div>

<div class="content-card">
    <table class="styled-table">
        <thead>
            <tr>
                <th>Produto Vendido</th>
                <th>Cliente</th>
                <th>Status</th>
                <th>Quantidade</th>
                <th>Valor Total</th>
                <th>Data da Venda</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for venda in vendas %}
            <tr>
                <td>{{ venda.produto.nome }}</td>
                <td>{{ venda.cliente.nome|default:"Consumidor Final" }}</td>
                <td>{{ venda.get_status_display }}</td>
                <td>{{ venda.quantidade }}</td>
                <td>R$ {{ venda.valor_total }}</td>
                <td>{{ venda.data_venda|date:"d/m/Y H:i" }}</td>
                <td class="actions">
                   {% if venda.status != 'CONCLUIDA' %}
                   <a href="{% url 'venda_editar' pk=venda.pk%}" class="btn" style="padding: 5px 10px; font-size: 12px; color: white;">Concluir</a>
                     {% else %}
                     <span>--</span>
                        {% endif %}
                </td>   
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align: center;">Nenhuma venda registrada.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}